<!DOCTYPE html>
<html lang="en">
<head>
          <title>Vorsprung durch Informatik</title>
        <meta charset="utf-8" />



    <meta name="tags" contents="Linux" />
    <meta name="tags" contents="NoSQL" />
    <meta name="tags" contents="MongoDB" />
    <meta name="tags" contents="database" />
    <meta name="tags" contents="Fedora" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="../../">Vorsprung durch Informatik <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="../../2012/03/how-to-install-mongodb-on-fedora.html" rel="bookmark"
         title="Permalink to How to install MongoDB on Fedora">How to install MongoDB on Fedora</a></h2>
 
  </header>
  <footer class="post-info">
    <abbr class="published" title="2012-03-18T01:00:00">
      18/mar/2012 01:00
    </abbr>
    <address class="vcard author">
      By           <a class="url fn" href="../../author/csparpa.html">csparpa</a>
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <p>During the last days, I've been delving into NoSQL datastores study and now I've got the chance to use MongoDB for a real-life need (of course, something relating to work issues). In order to reach my target, I needed a fresh installation of one of the most promising NoSQL technologies: the document-oriented datastore MongoDB.  </p>
<h3>Requirements</h3>
<p>Here is how I managed to install MongoDB 2.0.3 on a Fedora Core 11 host. You can easily adapt the steps I went through to your operational environment.  </p>
<p>We're about to issue every command as <code>root</code> user.  </p>
<h3>Steps</h3>
<p>First, I downloaded, extracted and placed the Mongo stuff (I didn't use the 10gen repo, but just a <code>tar.gz</code> from MongoDB website):  </p>
<div class="highlight"><pre><span class="nv">$&gt;</span> <span class="nb">cd</span> /opt
<span class="nv">$&gt;</span> wget http://fastdl.mongodb.org/linux/mongodb-linux-i686-2.0.3.tgz
<span class="nv">$&gt;</span> tar xvf mongodb-linux-i686-2.0.3.tgz
<span class="nv">$&gt;</span> mv mongodb-linux-i686-2.0.3.tg mongodb-2.0.3
</pre></div>


<p>I decided that my databases would go under <code>/usr/data/mongodb</code> and that MongoDB log file would be <code>/var/log/mongodb.log</code></p>
<p>As I wanted my MongoDB server instance to be started/stopped as a demon, I prepared the following <code>init.d</code> script named <code>mongodb</code> and placed it under <code>/etc/init.d/</code>:</p>
<div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="nb">source</span> /etc/rc.d/init.d/functions
<span class="nv">prog</span><span class="o">=</span><span class="s2">&quot;mongod&quot;</span>
<span class="nv">mongod</span><span class="o">=</span><span class="s2">&quot;/opt/mongodb-2.0.3/bin/mongod&quot;</span>
<span class="nv">RETVAL</span><span class="o">=</span>0

start<span class="o">()</span> <span class="o">{</span>
  <span class="nb">echo</span> -n <span class="s2">$&quot;Starting $prog: &quot;</span>
  <span class="c">#This is the fundamental call to start the MongoDB server instance</span>
  daemon <span class="nv">$mongod</span> <span class="s2">&quot;--fork --journal --dbpath /usr/data/mongodb \</span>
<span class="s2">  --logpath /var/log/mongodb.log \</span>
<span class="s2">  --logappend 2&amp;gt;&amp;amp;1 &amp;gt;&amp;gt;/var/log/mongodb.log&quot;</span>
  <span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
  <span class="nb">echo</span>
  <span class="o">[</span> <span class="nv">$RETVAL</span> -eq 0 <span class="o">]</span> &amp;amp;&amp;amp; touch /var/lock/subsys/<span class="nv">$prog</span>
  <span class="k">return</span> <span class="nv">$RETVAL</span>
<span class="o">}</span>

stop<span class="o">()</span> <span class="o">{</span>
  <span class="nb">echo</span> -n <span class="s2">$&quot;Stopping $prog: &quot;</span>
  killproc <span class="nv">$prog</span>
  <span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
  <span class="nb">echo</span>
  <span class="o">[</span> <span class="nv">$RETVAL</span> -eq 0 <span class="o">]</span> &amp;amp;&amp;amp; rm -f /var/lock/subsys/<span class="nv">$prog</span>
  <span class="k">return</span> <span class="nv">$RETVAL</span>
<span class="o">}</span>

<span class="k">case</span> <span class="s2">&quot;$1&quot;</span> in
 start<span class="o">)</span>
  start
  ;;
 stop<span class="o">)</span>
  stop
  ;;
 restart<span class="o">)</span>
  stop
  start
  ;;
 status<span class="o">)</span>
  status <span class="nv">$mongod</span>
  <span class="nv">RETVAL</span><span class="o">=</span><span class="nv">$?</span>
  ;;
 *<span class="o">)</span>
  <span class="nb">echo</span> <span class="s2">$&quot;Usage: $0 {start|stop|restart|status}&quot;</span>
  <span class="nv">RETVAL</span><span class="o">=</span>1
<span class="k">esac</span>

<span class="nb">exit</span> <span class="nv">$RETVAL</span>
</pre></div>


<p>Then, I opened my Iptables firewall's <code>INPUT</code> chain so that port 27017 (the port MongoDB server is listening to) is not blocked: I opened the file <code>/etc/sysconfig/iptables</code> and added the following rule before of the <code>COMMIT</code> statement:  </p>
<div class="highlight"><pre>-A INPUT -p tcp -m tcp -m multiport --ports 27017 -j ACCEPT
</pre></div>


<p>and restarted iptables with:  </p>
<div class="highlight"><pre><span class="nv">$&gt;</span> service iptables restart
</pre></div>


<p>That's it. Finally, I started the server instance with:  </p>
<div class="highlight"><pre><span class="nv">$&gt;</span> service mongodb start
</pre></div>


<p>and tested the whole thing opening the Mongo Javascript shell like this:  </p>
<div class="highlight"><pre><span class="nv">$&gt;</span> <span class="nb">cd</span> /opt/mongodb-2.0.3/bin
<span class="nv">$&gt;</span> ./mongo
</pre></div>


<p>and everything was fine.</p>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>